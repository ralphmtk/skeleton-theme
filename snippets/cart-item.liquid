{%- comment -%}
  Renders a single line item in the cart.
  Accepts:
  - item: {object} The cart line item object.
  - line_index: {number} The 1-based index of the item in the cart loop.
{%- endcomment -%}
<article class="cart-item" data-key="{{ item.key }}" data-variant-id="{{ item.variant_id }}" data-line="{{ line_index }}">
  <div class="cart-item__media">
    {%- if item.image -%}
      {%- render 'image', image: item.image, class: 'cart-item__image', width: 220, height: 220 -%}
    {%- endif -%}
  </div>
  <div class="cart-item__content">
    <h2 class="cart-item__title">{{ item.product.title }}</h2>
    <div class="cart-item__unit">{{ item.final_price | money }} {{ 'each' | t }}</div>
    <div class="cart-item__total">{{ item.final_line_price | money }}</div>
  </div>
  <div class="cart-item__qty">
    <div class="qty-stepper" role="group" aria-label="Quantity for {{ item.product.title }}">
      <button class="qty-stepper__btn" type="button" data-action="decrement" aria-label="Decrease quantity">âˆ’</button>
      <input class="qty-stepper__input" type="number" inputmode="numeric" min="0" value="{{ item.quantity }}" aria-label="Quantity">
      <button class="qty-stepper__btn" type="button" data-action="increment" aria-label="Increase quantity">+</button>
    </div>
    <button class="cart-item__remove" type="button" data-action="remove" data-key="{{ item.key }}">{{ 'sections.cart.remove' | t | default: 'Remove' }}</button>
  </div>
</article>

{% stylesheet %}
  /* Item card */
  .cart-item {
    display: grid;
    grid-template-columns: 220px 1fr auto;
    gap: 24px;
    padding: 24px;
    border: 1px solid rgba(0,0,0,.12);
    border-radius: 16px;
    background: #fff;
    align-items: center;
  }
  .cart-item__media { width: 220px; height: 220px; border-radius: 12px; overflow: hidden; background: #f7f7f7; display: grid; place-items: center; }
  .cart-item__image { width: 100%; height: 100%; object-fit: contain; }
  .cart-item__content { display: grid; gap: 8px; }
  .cart-item__title { font-family: var(--font-primary--family); font-weight: 800; font-size: 28px; margin: 0; }
  .cart-item__unit { color: #666; font-weight: 600; font-size: 12px;}
  .cart-item__total { font-size: 32px; font-weight: 800; font-family: var(--font-primary--family); }
  .cart-item__qty { display: grid; gap: 10px; justify-items: end; }

  .qty-stepper { display: inline-grid; grid-template-columns: 44px 64px 44px; align-items: center; border: 1px solid rgba(0,0,0,.15); border-radius: 999px; overflow: hidden; height: 48px; }
  .qty-stepper__btn { width: 44px; height: 48px; background: #fff; border: 0; font-size: 22px; font-weight: 700; cursor: pointer; }
  .qty-stepper__input { width: 64px; height: 48px; border: 0; text-align: center; font-weight: 700; font-size: 18px; }
  .cart-item__remove { background: none; border: 0; color: #000; text-decoration: none; cursor: pointer; font-weight: 600; }

  @media (max-width: 1023px) {
    .cart-item { grid-template-columns: 120px 1fr; }
    .cart-item__media { width: 120px; height: 120px; }
    .cart-item__title { font-size: 22px; }
    .cart-item__total { font-size: 24px; }
    .cart-item__qty { justify-items: start; grid-column: 1 / -1; }
  }

  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }
{% endstylesheet %}
