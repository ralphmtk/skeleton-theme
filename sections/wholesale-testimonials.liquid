<section class="wholesale-testimonials full-width" aria-label="Wholesale Testimonials">
  <div class="wholesale-testimonials__container">
    <!-- Header -->
    <div class="wholesale-testimonials__header">
      {% render 'wholesale-section-header',
        crossed_text: section.settings.crossed_text,
        title: section.settings.title,
        title_color: '#e91e63'
      %}
    </div>

    <!-- Content Grid -->
    <div class="wholesale-testimonials__content">
      <!-- Left Side: Testimonial Images -->
      <div class="wholesale-testimonials__testimonials">
        {%- for i in (1..6) -%}
          <div class="wholesale-testimonials__testimonial-item">
            <img
              src="{{ 'wholesale_testimonial' | append: i | append: '.png' | asset_url }}"
              alt="Testimonial {{ i }}"
              loading="lazy"
            >
          </div>
        {%- endfor -%}
      </div>

      <!-- Right Side: Consumers -->
      <div class="wholesale-testimonials__consumers-section">
        <h3 class="wholesale-testimonials__consumers-title">Consumers</h3>

        <div class="wholesale-testimonials__consumers-grid">
          {%- for i in (1..6) -%}
            <div class="wholesale-testimonials__consumer-item">
              <img
                src="{{ 'wholesale_consumer' | append: i | append: '.png' | asset_url }}"
                alt="Consumer {{ i }}"
                loading="lazy"
              >
            </div>
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% stylesheet %}
.wholesale-testimonials {
  width: 100%;
  min-height: 100vh;
  background: #1a1a3e;
  padding: 80px 40px;
  box-sizing: border-box;
  margin: 0;
}

.wholesale-testimonials__container {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
}

.wholesale-testimonials__header {
  opacity: 0;
  transform: translateY(30px);
  margin-bottom: 60px;
}

/* Content Grid */
.wholesale-testimonials__content {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 60px;
  align-items: start;
}

/* Left Side: Testimonials */
.wholesale-testimonials__testimonials {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.wholesale-testimonials__testimonial-item {
  width: 100%;
  opacity: 0;
  transform: translateX(-50px);
  transition: all 0.3s ease;
}

.wholesale-testimonials__testimonial-item:hover {
  transform: translateX(-50px) scale(1.02);
}

.wholesale-testimonials__testimonial-item img {
  width: 100%;
  height: auto;
  display: block;
  filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));
}

/* Right Side: Consumers */
.wholesale-testimonials__consumers-section {
  display: flex;
  flex-direction: column;
}

.wholesale-testimonials__consumers-title {
  font-size: 48px;
  font-weight: 800;
  color: #ffffff;
  margin: 0 0 30px 0;
  font-family: 'Exo', sans-serif;
  letter-spacing: 1px;
  opacity: 0;
  transform: translateY(20px);
}

.wholesale-testimonials__consumers-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.wholesale-testimonials__consumer-item {
  aspect-ratio: 9/16;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  opacity: 0;
  transform: scale(0.9);
}

.wholesale-testimonials__consumer-item:hover {
  transform: scale(1.05);
  box-shadow: 0 15px 40px rgba(233, 30, 99, 0.3);
}

.wholesale-testimonials__consumer-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Responsive */
@media (max-width: 1200px) {
  .wholesale-testimonials__content {
    grid-template-columns: 1fr 1.5fr;
    gap: 40px;
  }
}

@media (max-width: 1023px) {
  .wholesale-testimonials {
    padding: 60px 24px;
  }

  .wholesale-testimonials__content {
    grid-template-columns: 1fr;
    gap: 60px;
  }

  .wholesale-testimonials__consumers-title {
    font-size: 38px;
    margin-bottom: 24px;
  }

  .wholesale-testimonials__consumers-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }
}

@media (max-width: 767px) {
  .wholesale-testimonials {
    padding: 50px 20px;
    min-height: 100vh;
  }

  .wholesale-testimonials__header {
    margin-bottom: 40px;
  }

  .wholesale-testimonials__content {
    gap: 40px;
    min-height: 70vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  /* Testimonials Stack */
  .wholesale-testimonials__testimonials {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .wholesale-testimonials__testimonial-item {
    width: 100%;
    opacity: 0;
    transform: translateY(30px);
  }

  /* Consumers Horizontal Scroll */
  .wholesale-testimonials__consumers-section {
    position: relative;
    width: 100%;
    overflow: hidden;
    padding: 0 20px;
  }

  .wholesale-testimonials__consumers-title {
    font-size: 28px;
    margin-bottom: 30px;
    text-align: center;
  }

  .wholesale-testimonials__consumers-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }

  .wholesale-testimonials__consumer-item {
    width: 100%;
    aspect-ratio: 9/16;
  }
}
{% endstylesheet %}

<!-- GSAP & ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>

<script>
(function() {
  function initWholesaleTestimonials() {
    if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {
      setTimeout(initWholesaleTestimonials, 50);
      return;
    }

    gsap.registerPlugin(ScrollTrigger);

    var section = document.querySelector('.wholesale-testimonials');
    if (!section) return;

    var header = section.querySelector('.wholesale-testimonials__header');
    var testimonials = section.querySelectorAll('.wholesale-testimonials__testimonial-item');
    var consumersTitle = section.querySelector('.wholesale-testimonials__consumers-title');
    var consumersGrid = section.querySelector('.wholesale-testimonials__consumers-grid');
    var consumerItems = section.querySelectorAll('.wholesale-testimonials__consumer-item');
    var isMobile = window.innerWidth <= 767;

    if (!isMobile) {
      // Desktop animations
      var tl = gsap.timeline({
        scrollTrigger: {
          trigger: section,
          start: 'top 60%',
          toggleActions: 'play none none reverse'
        }
      });

      if (header) {
        tl.to(header, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: 'power2.out'
        });
      }

      if (testimonials.length > 0) {
        testimonials.forEach(function(item, index) {
          tl.to(item, {
            opacity: 1,
            x: 0,
            duration: 0.6,
            ease: 'power2.out'
          }, '-=' + (index === 0 ? 0.4 : 0.5));
        });
      }

      if (consumersTitle) {
        tl.to(consumersTitle, {
          opacity: 1,
          y: 0,
          duration: 0.6,
          ease: 'power2.out'
        }, '-=0.8');
      }

      if (consumerItems.length > 0) {
        tl.to(consumerItems, {
          opacity: 1,
          scale: 1,
          duration: 0.5,
          ease: 'back.out(1.3)',
          stagger: {
            amount: 0.6,
            grid: [2, 3],
            from: 'start'
          }
        }, '-=0.4');
      }
    } else {
      // Mobile - Simple fade in animations
      // Header
      if (header) {
        gsap.to(header, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: 'power2.out',
          scrollTrigger: {
            trigger: section,
            start: 'top 70%',
            toggleActions: 'play none none reverse'
          }
        });
      }

      // Testimonials - fade in as they cross bottom 25%
      if (testimonials.length > 0) {
        testimonials.forEach(function(item) {
          gsap.to(item, {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 0.6,
            ease: 'power2.out',
            scrollTrigger: {
              trigger: item,
              start: 'top 75%',
              toggleActions: 'play none none reverse'
            }
          });
        });
      }

      // Consumers title
      if (consumersTitle) {
        gsap.to(consumersTitle, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: 'power2.out',
          scrollTrigger: {
            trigger: consumersTitle,
            start: 'top 75%',
            toggleActions: 'play none none reverse'
          }
        });
      }

      // Consumer items - fade in as they cross bottom 25%
      if (consumerItems.length > 0) {
        consumerItems.forEach(function(item) {
          gsap.to(item, {
            opacity: 1,
            scale: 1,
            duration: 0.6,
            ease: 'power2.out',
            scrollTrigger: {
              trigger: item,
              start: 'top 75%',
              toggleActions: 'play none none reverse'
            }
          });
        });
      }
    }

    // Handle resize
    var resizeTimeout;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(function() {
        ScrollTrigger.refresh();
        isMobile = window.innerWidth <= 767;
      }, 250);
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initWholesaleTestimonials);
  } else {
    initWholesaleTestimonials();
  }
})();
</script>

{% schema %}
{
  "name": "Wholesale Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "crossed_text",
      "label": "Crossed Out Text",
      "default": "Slow Moving Products"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Fast Moving, Proven Demand"
    }
  ],
  "presets": [
    {
      "name": "Wholesale Testimonials"
    }
  ]
}
{% endschema %}

<style>
  .wholesale-testimonials * {
    font-family: 'Exo', sans-serif !important;
  }
</style>
